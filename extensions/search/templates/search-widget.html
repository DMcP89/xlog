<div class="field has-addons">
  <div class="control is-expanded">
    <input type="text"
           id="newPage"
           name="q"
           hx-get="/+/search"
           hx-trigger="keyup delay:0.2s"
           hx-target="next"
           list="searchResults"
           class="input"
           placeholder="New/Search..."
           onkeyup="if(event.keyCode == 13){ document.location.pathname = this.value }"
           autocomplete="off"
    />
    <datalist id="searchResults"></datalist>
  </div>
  <div class="control">
    <a class="button" onclick="document.location.pathname = document.getElementById('newPage').value">
      <span class="icon"><i class="fa-solid fa-plus"></i></span>
    </a>
  </div>
</div>

<script type="application/javascript">
 document.addEventListener('selectionchange', function() {
     let selection = window.getSelection();
     let text = selection.toString();

     if( text.length == 0 ) { return; }
     // Ignore selection in the input itself
     if( selection.anchorNode.className == 'control is-expanded' ) { return; }

     document.getElementById('newPage').value = text;
 })
</script>
